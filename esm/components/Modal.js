import _extends from"@babel/runtime-corejs3/helpers/extends";import _regeneratorRuntime from"@babel/runtime-corejs3/regenerator";import _asyncToGenerator from"@babel/runtime-corejs3/helpers/asyncToGenerator";import _slicedToArray from"@babel/runtime-corejs3/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime-corejs3/helpers/objectWithoutProperties";import _concatInstanceProperty from"@babel/runtime-corejs3/core-js-stable/instance/concat";/** @jsx jsx */import{wait}from'@globalunderdog/common';import React,{useEffect,useState}from'react';import ReactModal from'react-modal';import{Container,jsx,useTheme}from'../style';// To keep the functionality of `@globalunderdog/common-front` modal simple
// we won't be exposing these props and instead use the doc-commented values
// for simplicity.
var commonModalProps=function commonModalProps(hiding,className){var _context;return{shouldCloseOnEsc:true,shouldCloseOnOverlayClick:true,shouldFocusAfterRender:true,overlayClassName:"modalOverlay ".concat(hiding?'hiding':''),className:_concatInstanceProperty(_context="modalCard ".concat(className!==null&&className!==void 0?className:''," ")).call(_context,hiding?'hiding':'')};};export var GUModal=function GUModal(_ref){var children=_ref.children,setOpen=_ref.setOpen,className=_ref.className,onRequestClose=_ref.onRequestClose,isOpen=_ref.isOpen,props=_objectWithoutProperties(_ref,["children","setOpen","className","onRequestClose","isOpen"]);var theme=useTheme();useEffect(function(){ReactModal.setAppElement('body');},[]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hiding=_useState2[0],setHiding=_useState2[1];var hideModal=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setHiding(true);// + 30ms so very slow computers can have smooth animations (usually
// in these cases the js timeout might finish about 10-20 ms earlier
// than the CSS animation)
_context2.next=3;return wait(380);case 3:setOpen(false);setHiding(false);case 5:case"end":return _context2.stop();}}},_callee);}));return function hideModal(){return _ref2.apply(this,arguments);};}();return jsx(ReactModal,_extends({},commonModalProps(hiding,className),{css:theme.modal.css(theme),isOpen:isOpen||hiding,onRequestClose:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$onRequestClose;var shouldClose;return _regeneratorRuntime.wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!onRequestClose){_context3.next=15;break;}_context3.next=3;return onRequestClose();case 3:_context3.t2=_yield$onRequestClose=_context3.sent;_context3.t1=_context3.t2!==null;if(!_context3.t1){_context3.next=7;break;}_context3.t1=_yield$onRequestClose!==void 0;case 7:if(!_context3.t1){_context3.next=11;break;}_context3.t3=_yield$onRequestClose;_context3.next=12;break;case 11:_context3.t3=true;case 12:_context3.t0=_context3.t3;_context3.next=16;break;case 15:_context3.t0=true;case 16:shouldClose=_context3.t0;if(!shouldClose){_context3.next=22;break;}_context3.next=20;return hideModal();case 20:_context3.next=23;break;case 22:setOpen(true);case 23:case"end":return _context3.stop();}}},_callee2);}))},props),jsx(Container,null,children));};